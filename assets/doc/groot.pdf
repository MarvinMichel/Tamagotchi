//Audiobestanden die gebruikt worden voor de interactie
const song = new Audio('./assets/sfx/mrBlueSky.mp3');
const greeting = new Audio('./assets/sfx/iAmGroot.mp3');

//Sla de elementen op met class="stars"
const star1 = document.querySelectorAll('.stars')[0];
const star2 = document.querySelectorAll('.stars')[1];

//Sla de datum en tijd (aantal uren) op
let today = new Date();
let hours = today.getHours();

//Als het donker is zijn de sterren gewoon zichtbaar, als het licht is worden ze op niet zichtbaar gezet
if (hours >= 21 || hours <= 5) {
    console.log('Het is donker, kijk alle sterren!');
} else if (hours >= 6 && hours <= 20) {
    star1.classList.remove('stars');
    star1.classList.add('starsNot');
    star2.classList.remove('stars');
    star2.classList.add('starsNot');
    console.log('Het is nog licht, helaas zijn de sterren niet zichtbaar...');
}

//Variabele om te controleren hoe vaak de knop ingedrukt is
let btnPress = 0;

//Alle data van de animatie van klein naar groot
const growData = {
    container: document.getElementById('animContainer'),
    renderer: 'svg',
    autoplay: false,
    loop: false,
    path: './assets/js/grow.json'
}

//Alle data van de animatie van groot naar klein
const shrinkData = {
    container: document.getElementById('animContainer'),
    renderer: 'svg',
    autoplay: false,
    loop: false,
    path: './assets/js/shrink.json'
}

//Alle data van de animatie van het dansje
const danceData = {
    container: document.getElementById('animContainer'),
    renderer: 'svg',
    autoplay: false,
    loop: 27,
    path: './assets/js/dance.json'
}

//Functie voor de groei animatie
function growGroot() {
    //Haalt de bestaande animatie weg om hem te vervangen met een bewegende
    groot.destroy();
    groot = bodymovin.loadAnimation(growData);
    groot.play();

    //Zorgt ervoor dat de juiste knoppen beschikbaar of onbeschikbaar zijn
    document.querySelectorAll('input')[0].disabled = true;
    document.querySelectorAll('input')[1].disabled = false;
    document.querySelectorAll('input')[2].disabled = false;
}

//Functie voor de groet 'I am Groot'
function iAmGroot() {
    greeting.play();
}

//Functie voor de krimp animatie
function shrinkGroot() {
    //Stopt het liedje als die afspeelt en reset de tijd ervan
    song.pause();
    song.currentTime = 0;

    //Haalt de bestaande animatie weg om hem te vervangen met een bewegende
    groot.destroy();
    groot = bodymovin.loadAnimation(shrinkData);
    groot.play();

    //Zorgt ervoor dat de juiste knoppen beschikbaar of onbeschikbaar zijn
    document.querySelectorAll('input')[0].disabled = false;
    document.querySelectorAll('input')[1].disabled = true;
    document.querySelectorAll('input')[2].disabled = true;
}

//Functie voor dans animatie
function danceGroot() {
    //Voor de eerste keer en alle even keren dat de knop wordt gebruikt
    if (btnPress % 2 == 0 || btnPress == 0) {
        song.play();
        groot.destroy();
        groot = bodymovin.loadAnimation(danceData);
        groot.play();
    }
    //Voor alle oneven keren dat de knop wordt gebruikt
    else {
        song.pause();
        groot.pause();
    }
    btnPress++;
}

//Constate variabele voor de api-Key en  de url die gefetcht wordt
const privKey = "d090c2fc328c95d10eebc8ce11a89e09ceecf530";
const pubKey = '8d62575220cca1d317c6f519bd3fa014';
const url = 'https://gateway.marvel.com:443/v1/public/characters?name=Groot&apikey=' + pubKey;

function fetchGroot() {
    //fetch functie die een repsonse omzet in een json file
    fetch(url)
        .then(function(response) {
            response.json()

        }).catch(function(error) {
            console.log('Er ging iets mis..');
        });
}


//Geeft een vaste waarde aan de container, zodat het begin stadium een boompje is
let groot = bodymovin.loadAnimation(growData);

//Events
document.getElementById('animContainer').addEventListener('click', iAmGroot); //Klik op figure
document.getElementById('animContainer').addEventListener('dblclick', fetchGroot); //Double klik op figure
document.querySelectorAll('input')[0].addEventListener('click', growGroot); //Klik op button links (eerste)
document.querySelectorAll('input')[1].addEventListener('click', shrinkGroot); //Klik op button midden (tweede)
document.querySelectorAll('input')[2].addEventListener('click', danceGroot); //Klik op button rechts (derde)